<html>
<script type="text/javascript" src="../../js/moment.min.js"></script>
<script type="text/javascript" src="../../js/jquery-1.8.0.js"></script>
<script type="text/javascript" src="../../js/bootstrap.js"></script>

    <link href="../../css/bootstrap.css" rel="stylesheet" type="text/css">


<script type="text/javascript">
$(document).ready(function() {    
item = 
{"domain": "i.imgur.com", 
"banned_by": null, 
"media_embed": {}, 
"subreddit": "starcraft", //  
"selftext_html": null, 
"selftext": "", 
"likes": null, 
"link_flair_text": null, 
"id": "ysyza", 
"clicked": false, 
"title": "Hiding yo broods, standard TLO play.", //
"num_comments": 38,  //
"score": 339,  //
"approved_by": null, // 
"over_18": false,  //
"hidden": false,  //
"thumbnail": "http://d.thumbs.redditmedia.com/ZUvrAZw2KcwgpYfi.jpg",  //
"subreddit_id": "t5_2qpp6", 
"edited": false, 
"link_flair_css_class": null, //
"author_flair_css_class": "Z", // Starcaft only? 
"downs": 81, //
"saved": false, 
"is_self": false, 
"permalink": "/r/starcraft/comments/ysyza/hiding_yo_broods_standard_tlo_play/", //
 "name": "t3_ysyza", 
 "created": 1345925658.0, // 
 "url": "http://i.imgur.com/WLPMw.jpg", //
 "author_flair_text": "", 
 "author": "zmak", //
 "created_utc": 1345900458.0,  //
 "media": null,
 "num_reports": null, 
 "ups": 420 // 

 };

           // var url = "http://www.reddit.com/reddits/.json";
           /*
           console.debug((new Date()));
           var url = "http://www.reddit.com/reddits/.json?jsonp=?";
            $.getJSON(url, function(data) {
           // 	console.log(data);
           //console.debug((new Date()));

            })
            .error(function() { alert("TODO3: Handle Error getting JSON / end of reddit/etc show error page and keep retrying like on new image"); });
*/

var defaultReddits = [ "All", "AdviceAnimals", "announcements", "AskReddit", "atheism", "aww", "bestof", "blog", "funny", "gaming", "IAmA", "movies", "Music", "pics", "politics", "science", "technology", "todayilearned", "videos", "worldnews", "WTF"]; // from /reddits 22Sep12

function typeaheadSource(query, cbFn) {
	var bgh = $("#buttonsGoHere");
	var completions = [];
	var alreadySelected = [];
	for (var i = bgh.children().length - 1; i >= 0; i--) {
		var child = $(bgh.children()[i]);
		alreadySelected.push(child.data("subreddit"));
	}

	var filtered = defaultReddits.filter(function(sub){return( -1 == alreadySelected.indexOf(sub))});
	cbFn(filtered);
}

function subredditButton(subreddit) {
	// TODO: Add a proper "x"
	var button = $("<button />")
	.addClass("btn")
	.addClass("btn-mini")
	.addClass("subreddit-" + subreddit)
	.data("subreddit", subreddit)
	.html(subreddit + "  X")
	.click(function() { $(this).remove() });

	return(button);		
}

$('#subredditsTypeahead')
.typeahead({source:typeaheadSource})
.change(function(event){
	var val = $(this).val();
	if(val.length > 2)  { 
		var bgh = $("#buttonsGoHere");
		if(0==bgh.find(".subreddit-" + val).length)
		{
			bgh.append(subredditButton(val));
			$(this).val("");
		};
	}
	event.preventDefault();
	event.stopPropagation();
}
); // NOTE: Before when this was .on( "change") it would reload the page if I picked an element < 2 chars.. still happening on Safari apparently

params = {"whatever":2}
var groups = ["#onoff"];

function getParams(params) {
	for(var group in groups) {
		group = $(groups[group]);
		active = group.find(".active");
		gParams = params[$(group).data("parameter-name")] = active.data("if-selected");
	}
}

function setParams(params) {
	for(var group in groups) {
		group = $(groups[group]);
		var searchVal = params[group.data("parameter-name")];
		console.log(searchVal);
		$.each(group.children(), function() { if(searchVal==$(this).data("if-selected")) $(this).addClass("active")})
	}
}
});
</script>

<div style="top: 50%; left: 50%">
	test
	<!--
<div class="hero-unit">
  <h1>Hands off your Mouse!</h1>
  <p>It's keyboard time!</p>
  <p>
	<ul>
		<li><b>j/a</b> - advance to next</li>
		<li><b>k/s</b> - go back</li>
		<li><b>d/l</b> - zoom/unzoom to fit</li>
		<li><b>space</b> - scroll down image, advance to next</li> 
	</ul>

    <a class="btn btn-primary btn-large">
    	Settings
    </a>

    <a href="about.html">About</a>
  </p>
</div>-->
</div>
<!-- Modal -->
<!--<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
-->
<div id="settingsModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h3 id="myModalLabel">Infinite Reddit</h3>
  </div>
  <div class="modal-body">
	<h4>Hands off your mouse! Use the keyboard instead!</h4>
	<h4>Keys</h4>
	<table>
		<tr>
			<td><b>j/a</b></td><td>advance</td>
			<td><b>k/s</b></td><td>go back</td> 
		</tr>
		<tr>
			<td><b>d/l</b></td><td>zoom/unzoom to fit</td>
			<td><b>space</b></td><td>scroll down image, advance to next</td>
		</tr>
	</table>

	<h4>Subreddits</h4>
	<form>
		<div id="buttonsGoHere"></div>

		<input type="text" data-provide="typeahead" id="subredditsTypeahead" placeholder="Enter Subreddits">
		<button type="button" class="btn btn-small">Reset to defaults</button><!-- TODO: reset to defaults -->
		<button type="button" class="btn btn=small" onClick="$.each( $('#buttonsGoHere').children(), function() {$(this).remove()} );">Clear</button>
	</form>

	<h4>Options</h4>
	<table>
		<tr>
			<td>
				Zoom Images:
			</td>
			<td>
				<div class="btn-group" data-toggle="buttons-radio">
					<button type="button" class="btn btn-mini">Always</button>
					<button type="button" class="btn btn-mini">Except very tall</button>
					<button type="button" class="btn btn-mini">Max 75%</button>
					<button type="button" class="btn btn-mini">Max 50%</button>
					<button type="button" class="btn btn-mini">Never</button>
				</div>
			</td>
		</tr>
		<tr>
			<td>
				Videos:
			</td>
			<td> 
				<div class="btn-group" data-toggle="buttons-radio">
					<button type="button" class="btn btn-mini">Autoplay</button>
					<button type="button" class="btn btn-mini">Show</button>
					<button type="button" class="btn btn-mini">Off</button>
				</div>
			</td>
		</tr>
		<tr>
			<td>NSFW Mode:</td>
			<td>
				<div class="btn-group" data-toggle="buttons-radio">
					<button type="button" class="btn btn-mini">On</button>
					<button type="button" class="btn btn-mini">Off</button>
				</div>
			</td>
		</tr>
	</table>

	<br />
	<a href="about.html">About</a>
	</br>

  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div>

<a href="#settingsModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>
 
<dl><dt>dt</dt><dd>dd</dd></dl>

</html>