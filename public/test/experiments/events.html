<html>
<script type="text/javascript" src="../../js/moment.min.js"></script>
<script type="text/javascript" src="../../js/jquery-1.8.0.js"></script>
<script type="text/javascript" src="../../js/bootstrap.js"></script>

    <link href="../../css/bootstrap.css" rel="stylesheet" type="text/css">


<script type="text/javascript">
$(document).ready(function() {    
item = 
{"domain": "i.imgur.com", 
"banned_by": null, 
"media_embed": {}, 
"subreddit": "starcraft", //  
"selftext_html": null, 
"selftext": "", 
"likes": null, 
"link_flair_text": null, 
"id": "ysyza", 
"clicked": false, 
"title": "Hiding yo broods, standard TLO play.", //
"num_comments": 38,  //
"score": 339,  //
"approved_by": null, // 
"over_18": false,  //
"hidden": false,  //
"thumbnail": "http://d.thumbs.redditmedia.com/ZUvrAZw2KcwgpYfi.jpg",  //
"subreddit_id": "t5_2qpp6", 
"edited": false, 
"link_flair_css_class": null, //
"author_flair_css_class": "Z", // Starcaft only? 
"downs": 81, //
"saved": false, 
"is_self": false, 
"permalink": "/r/starcraft/comments/ysyza/hiding_yo_broods_standard_tlo_play/", //
 "name": "t3_ysyza", 
 "created": 1345925658.0, // 
 "url": "http://i.imgur.com/WLPMw.jpg", //
 "author_flair_text": "", 
 "author": "zmak", //
 "created_utc": 1345900458.0,  //
 "media": null,
 "num_reports": null, 
 "ups": 420 // 

 };

           // var url = "http://www.reddit.com/reddits/.json";
           /*
           console.debug((new Date()));
           var url = "http://www.reddit.com/reddits/.json?jsonp=?";
            $.getJSON(url, function(data) {
           // 	console.log(data);
           //console.debug((new Date()));

            })
            .error(function() { alert("TODO3: Handle Error getting JSON / end of reddit/etc show error page and keep retrying like on new image"); });
*/

tah = $('.typeahead');
tah2 = $("#tah");
var sourcearr = ["Pics", "starcraft", "all", "funny", "fuuuuuu"];

function f(query, cbFn) {
	var bgh = $("#buttonsGoHere");
	var completions = [];
	var alreadySelected = [];
	for (var i = bgh.children().length - 1; i >= 0; i--) {
		var child = $(bgh.children()[i]);
		alreadySelected.push(child.data("subreddit"));
	}

	var filtered = sourcearr.filter(function(sub){console.log(sub); return( -1 == alreadySelected.indexOf(sub))});
	cbFn(filtered);
}

$('#tah').typeahead({source:f}).on("change", function(){
	var val = $(this).val();
	if(val.lenght<2) return;

	var bgh = $("#buttonsGoHere");
	if(0==bgh.find(".subreddit-" + val).length)
	{
		// TODO: Add a proper "x", make this jQuerified
		var button = $(	'<button type="button" class="btn subreddit-' + val + '" data-subreddit="' + val + '"' +
						" onClick='$(this).remove()'>" + val + ' - X</button>'
		);
		bgh.append( button );
	};
}
);

params = {"whatever":2}
var groups = ["#onoff"];

function getParams(params) {
	for(var group in groups) {
		group = $(groups[group]);
		active = group.find(".active");
		gParams = params[$(group).data("parameter-name")] = active.data("if-selected");
	}
}

function setParams(params) {
	for(var group in groups) {
		group = $(groups[group]);
		var searchVal = params[group.data("parameter-name")];
		console.log(searchVal);
		$.each(group.children(), function() { if(searchVal==$(this).data("if-selected")) $(this).addClass("active")})
	}
}
});
</script>

<div id="buttonsGoHere">
</div>

<button type="button" class="btn btn-primary" data-loading-text="Loading...">Loading state</button>
<form>
	<input type="text" data-provide="typeahead" id="tah">
</form>

<!-- Modal -->
<div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h3 id="myModalLabel">Modal header</h3>
  </div>
  <div class="modal-body">
    <p>One fine body</p>

    Show Images: 
    			<div id="onoff" class="btn-group" data-toggle="buttons-radio" data-parameter-name="whatever">
				<button type="button" class="btn active" id="eon" data-if-selected=1>On</button>
				<button type="button" class="btn" id="eoff" data-if-selected=2>Off</button>
			</div>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div>

<!-- Button to trigger modal -->
<a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>
 <a href="#" onClick='setParams(params);console.log(params);'>Test</a>

</html>